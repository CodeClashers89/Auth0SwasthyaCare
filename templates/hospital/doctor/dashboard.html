<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Doctor Dashboard - SwasthyaCare</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'Inter', sans-serif;
            background-color: #e6fff7;
            min-height: 100vh;
        }

        /* NAVBAR */
        .navbar {
            background-color: #64cbab;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 50px;
            color: white;
        }

        .navbar-brand {
            font-size: 28px;
            font-weight: 600;
        }

        .navbar-center {
            display: flex;
            gap: 40px;
        }

        .navbar-center a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            opacity: 0.9;
        }

        .navbar-center a:hover {
            opacity: 1;
        }

        .navbar-right {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn-logout {
            background-color: #ef4444;
            padding: 8px 18px;
            border-radius: 8px;
            color: white;
            text-decoration: none;
            font-weight: 600;
        }

        /* MAIN */
        .main-content {
            padding: 40px 60px;
            max-width: 1400px;
            margin: auto;
        }

        .page-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-size: 42px;
            font-weight: 700;
        }

        .page-subtitle {
            font-size: 18px;
            color: #666;
        }

        /* ALERTS */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .alert-info {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .alert-warning {
            background-color: #fef3c7;
            color: #92400e;
        }

        /* GRID */
        .grid {
            display: grid;
            gap: 25px;
            margin-bottom: 25px;
        }

        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        /* STATS */
        .stats-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #64cbab;
        }

        .stats-card.success {
            border-left-color: #10b981;
        }

        .stats-number {
            font-size: 48px;
            font-weight: 700;
        }

        .stats-label {
            color: #666;
        }

        /* CARD */
        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }

        .card-header {
            background-color: #9ac2ea;
            padding: 20px 30px;
            color: white;
            font-size: 22px;
            font-weight: 600;
        }

        .card-body {
            padding: 25px;
        }

        /* TABLE */
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 14px;
            text-align: left;
        }

        th {
            background-color: #f8f9fa;
            font-size: 14px;
            text-transform: uppercase;
        }

        tbody tr:hover {
            background-color: #f9fafb;
        }

        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* BUTTONS */
        .btn {
            padding: 10px 22px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
        }

        .btn-sm {
            padding: 6px 14px;
            font-size: 13px;
        }

        .btn-primary {
            background-color: #7aa7df;
            color: white;
        }

        .btn-success {
            background-color: #64cbab;
            color: white;
        }

        .btn-secondary {
            background-color: #b5b5b5;
            color: white;
        }

        .btn-danger {
            background-color: #ef4444;
            color: white;
        }

        /* LIST */
        .info-list {
            list-style: none;
        }

        .info-list li {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .badge {
            background-color: #d1fae5;
            color: #065f46;
            padding: 5px 14px;
            border-radius: 20px;
            font-size: 13px;
        }

        /* EMPTY */
        .empty-state {
            text-align: center;
            padding: 40px 0;
            color: #888;
        }

        /* FOOTER ACTIONS */
        .flex-between {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        @media (max-width: 900px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }

            .main-content {
                padding: 20px;
            }
        }
    </style>
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="navbar-brand">SwasthyaCare</div>
        <div class="navbar-center">
            <a href="{% url 'hospital:doctor_dashboard' %}">Dashboard</a>
            <a href="{% url 'hospital:doctor_appointments' %}">Appointments</a>
            <a href="{% url 'hospital:view_surgeries' %}">Surgeries</a>
            <a href="{% url 'hospital:manage_availability' %}">Availability</a>
        </div>
        <div class="navbar-right">
            <span>{{ doctor.user.get_full_name }}</span>
            <a href="{% url 'hospital:logout' %}" class="btn-logout">Logout</a>
        </div>
    </nav>

    <!-- MAIN -->
    <main class="main-content">

        <div class="page-header">
            <h1 class="page-title">Welcome, Dr. {{ doctor.user.get_full_name }}</h1>
            <p class="page-subtitle">{{ doctor.specialization }}</p>
        </div>

        {% if unread_notifications > 0 %}
        <div class="alert alert-info">
            üîî You have {{ unread_notifications }} unread notification(s).
            <a href="{% url 'hospital:view_notifications' %}" class="btn btn-sm btn-primary">View</a>
        </div>
        {% endif %}

        {% if pending_surgeries_count > 0 %}
        <div class="alert alert-warning">
            ‚ö†Ô∏è You have {{ pending_surgeries_count }} pending surgery approval(s).
            <a href="{% url 'hospital:view_pending_surgeries' %}" class="btn btn-sm btn-primary">Review</a>
        </div>
        {% endif %}

        <!-- STATS -->
        <div class="grid grid-2">
            <div class="stats-card">
                <div class="stats-number">{{ today_appointments.count }}</div>
                <div class="stats-label">Today's Appointments</div>
            </div>
            <div class="stats-card success">
                <div class="stats-number">{{ upcoming_appointments.count }}</div>
                <div class="stats-label">Upcoming Appointments</div>
            </div>
        </div>

        <!-- TABLES -->
        <div class="grid grid-2">

            <!-- TODAY -->
            <div class="card">
                <div class="card-header">Today's Appointments</div>
                <div class="card-body">
                    {% if today_appointments %}
                    <table>
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Patient</th>
                                <th>Reason</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for appointment in today_appointments %}
                            <tr>
                                <td>{{ appointment.appointment_time|time:"h:i A" }}</td>
                                <td>
                                    <strong>{{ appointment.patient.patient_id }}</strong><br>
                                    {{ appointment.patient.user.get_full_name }}
                                </td>
                                <td>{{ appointment.reason|truncatewords:10 }}</td>
                                <td class="actions">
                                    <a href="{% url 'hospital:patient_history' appointment.patient.id %}"
                                        class="btn btn-sm btn-primary">History</a>
                                    <a href="{% url 'hospital:add_medical_record' appointment.id %}"
                                        class="btn btn-sm btn-success">Add</a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    {% else %}
                    <div class="empty-state">üìÖ No appointments today</div>
                    {% endif %}
                </div>
            </div>

            <!-- UPCOMING -->
            <div class="card">
                <div class="card-header">Upcoming Appointments</div>
                <div class="card-body">
                    {% if upcoming_appointments %}
                    <ul class="info-list">
                        {% for appointment in upcoming_appointments %}
                        <li>
                            <div>
                                <strong>{{ appointment.patient.patient_id }}</strong> -
                                {{ appointment.patient.user.get_full_name }}<br>
                                <small>{{ appointment.appointment_date }} at
                                    {{ appointment.appointment_time|time:"h:i A" }}</small>
                            </div>
                            <span class="badge">{{ appointment.status }}</span>
                        </li>
                        {% endfor %}
                    </ul>
                    {% else %}
                    <div class="empty-state">üìã No upcoming appointments</div>
                    {% endif %}
                </div>
            </div>

        </div>

        <!-- ACTIONS -->
        <div class="flex-between">
            <div>
                <a href="{% url 'hospital:doctor_appointments' %}" class="btn btn-primary">View All</a>
                <a href="{% url 'hospital:create_urgent_surgery_doctor' %}" class="btn btn-danger">üö® Urgent Surgery</a>
            </div>
            <a href="{% url 'hospital:manage_availability' %}" class="btn btn-secondary">Manage Availability</a>
        </div>

    </main>

</body>

</html>